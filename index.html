<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="description" content="–ì–∏–¥ –ø–æ –ø–æ—Ä–æ–¥–∞–º –∫–æ—à–µ–∫ - –ø–æ–¥–±–µ—Ä–∏—Ç–µ –∏–¥–µ–∞–ª—å–Ω—É—é –ø–æ—Ä–æ–¥—É –¥–ª—è –≤–∞—à–µ–≥–æ –¥–æ–º–∞. –ü–æ–∏—Å–∫, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –∏ –ø–æ–¥–±–æ—Ä –ø–æ—Ä–æ–¥—ã –ø–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º." />
  <meta name="keywords" content="–∫–æ—à–∫–∏, –ø–æ—Ä–æ–¥—ã –∫–æ—à–µ–∫, –≤—ã–±–æ—Ä –∫–æ—à–∫–∏, –º–µ–π–Ω-–∫—É–Ω, –±—Ä–∏—Ç–∞–Ω—Å–∫–∞—è, —Å—Ñ–∏–Ω–∫—Å, –±–µ–Ω–≥–∞–ª—å—Å–∫–∞—è" />
  <meta name="theme-color" content="#2ea56a" />
  <title>–ì–∏–¥ –ø–æ –ø–æ—Ä–æ–¥–∞–º –∫–æ—à–µ–∫</title>
  
  <!-- Preload critical resources -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- Preload –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ -->
  <link rel="preload" as="image" href="https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/hero.png">
  <link rel="preload" as="image" href="https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/long-haired.png">
  <link rel="preload" as="image" href="https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/hairless.png">
  <link href="https://fonts.googleapis.com/css2?family=Cuprum:wght@400;600;700&display=swap&subset=cyrillic" rel="stylesheet">
  
  <!-- Supabase CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  
  <!-- Critical CSS inline for faster loading -->
  <style>
    :root{
      --bg:#0f1113;--surface:#171a1c;--muted:#9aa3ad;--text:#e9eef2;--primary:#2ea56a;--primary-700:#1f8b55;--border:#252a2e;
      --radius:14px;--radius-lg:18px;--gap-2:8px;--gap-3:12px;--gap-4:16px;--gap-5:20px;--gap-6:24px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Cuprum,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text); background:linear-gradient(180deg,#0f1113 0%,#111416 100%);
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    a{color:inherit}
    .container{max-width:900px;margin:0 auto;padding:0 16px}
    .page{display:none;min-height:100dvh}
    .page.active{display:flex;flex-direction:column}
    header.site{padding:32px 0 8px;text-align:center}
    .title{font-size:32px;font-weight:800;margin:0 0 6px}
    .subtitle{margin:0 0 18px;color:var(--muted)}
    .hero-image-container{display:flex;justify-content:center;margin:24px 0}
    .hero-image{width:100%;max-width:400px;height:280px;object-fit:contain;border-radius:var(--radius-lg);box-shadow:0 8px 32px rgba(0,0,0,0.12);transition:transform 0.3s ease;background:transparent}
    .hero-image:hover{transform:translateY(-4px)}
    .search-row{display:flex;gap:var(--gap-3);align-items:center;flex-wrap:wrap;justify-content:center}
    .search{flex:1;min-width:200px;max-width:300px;display:flex;background:var(--surface);border:1px solid var(--border);border-radius:12px;overflow:hidden}
    .search input{
      width:100%;padding:12px 14px 12px 44px;background:transparent;border:0;color:var(--text);outline:none;
      background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="%239AA3AD" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>');
      background-repeat:no-repeat;background-position:12px center;font-size:16px;min-height:44px;
    }
    .btn{display:inline-flex;align-items:center;justify-content:center;
      gap:10px;padding:12px 16px;border-radius:12px;border:1px solid var(--border);background:var(--surface);
      color:var(--text);cursor:pointer;transition:.15s ease;white-space:nowrap;font-size:16px;min-height:44px;
    }
    .btn--primary{background:linear-gradient(135deg, #2ea56a 0%, #8b5cf6 100%);border-color:transparent}
    .btn:hover{transform:translateY(-1px)}
    .btn--primary:hover{background:linear-gradient(135deg, #1f8b55 0%, #7c3aed 100%);transform:translateY(-1px)}
    .btn:active{transform:translateY(0)}
    .grid{display:flex;flex-wrap:wrap;gap:var(--gap-6)}
    .card{flex:1 1 280px;max-width:calc(50% - var(--gap-6)/2);min-width:280px;width:100%;display:flex;flex-direction:column;gap:12px;
      background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-lg);padding:14px;transition:.15s ease;
      cursor:pointer;touch-action:manipulation;
    }
    .ph--black{background:rgb(23,26,28) !important}
    .card:hover{transform:translateY(-2px)}
    .card:active{transform:translateY(0)}
    .ph{height:200px;border-radius:12px;background:transparent;display:flex;align-items:center;justify-content:center;color:#a3aab3;overflow:hidden}
    .ph img{width:100%;height:100%;object-fit:contain;border-radius:12px}
    .card h3{margin:0 0 6px;font-size:18px;font-weight:600}
    .muted{color:var(--muted);font-size:14px;line-height:1.4}
    .chip{align-self:flex-start;padding:6px 10px;border-radius:999px;border:1px solid #355; background:#1a2126; color:#86d3ff;font-size:12px}
    section{display:flex;flex-direction:column;gap:var(--gap-5);margin:22px 0}
    .section-title{font-size:20px;margin:0;font-weight:600}
    .footer{margin-top:auto;border-top:1px solid var(--border);padding:20px 0;color:var(--muted);font-size:14px}
    .topbar{display:flex;align-items:center;gap:10px;margin:10px 0;flex-wrap:wrap}
    .topbar .back{padding:10px 12px;border-radius:10px;background:var(--surface);border:1px solid var(--border);min-height:44px;color:var(--text)}
    .detail-hero{display:flex;gap:20px;flex-wrap:wrap}
    .hero-img{flex:1 1 320px;height:260px;background:#fff;border-radius:14px}
    .hero-info{flex:2 1 320px;display:flex;flex-direction:column;gap:10px}
    .cols{display:flex;gap:var(--gap-6);flex-wrap:wrap}
    .box{flex:1 1 320px;background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:16px}
    .list{display:flex;flex-direction:column;gap:12px}
    .breeder{display:flex;justify-content:space-between;gap:10px;align-items:center;flex-wrap:wrap}
    .link{color:#86d3ff;text-decoration:none;min-height:44px;display:inline-flex;align-items:center}
    .link:hover{text-decoration:underline}
    .quiz{display:flex;flex-direction:column;gap:16px}
    .q{display:flex;flex-direction:column;gap:10px;background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:14px}
    .opts{display:flex;flex-wrap:wrap;gap:10px}
    .opt{padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:#15181a;cursor:pointer;min-height:44px;display:flex;align-items:center;justify-content:center;text-align:center;transition:.15s ease}
    .opt input{display:none}
    .opt.active,.opt:hover{background:#1a1f22;border-color:#2c3238}
    .opt:active{transform:scale(0.98)}
    
    /* Mobile optimizations */
    @media (max-width:840px){
      .card{max-width:100%}
      .ph{height:180px}
      .title{font-size:28px}
      .hero-image{max-width:350px;height:240px;object-fit:contain}
      .search-row{flex-direction:column;align-items:center}
      .search{min-width:auto;max-width:300px;width:100%}
      .btn{width:100%;justify-content:center}
      .detail-hero{flex-direction:column}
      .hero-img{flex:none;width:100%}
      .cols{flex-direction:column}
      .box{flex:none;width:100%}
      .breeder{flex-direction:column;align-items:flex-start;gap:8px}
      .opts{flex-direction:column}
      .opt{width:100%}
      .section-title{text-align:center}
      .grid{justify-content:center}
    }
    
    @media (max-width:480px){
      .container{padding:0 12px}
      header.site{padding:24px 0 8px}
      .title{font-size:24px}
      .hero-image{max-width:300px;height:200px;object-fit:contain}
      .card{padding:12px}
      .ph{height:160px}
      .btn{padding:14px 16px;font-size:16px}
      .search input{padding:12px 16px 12px 48px;font-size:16px;min-height:44px}
      .topbar{gap:8px}
      .topbar .back{padding:12px 14px}
      .section-title{text-align:center}
      .grid{justify-content:center}
    }
    
    /* Performance optimizations */
    .card,.btn,.opt{will-change:transform}
    .card:hover,.btn:hover,.opt:hover{will-change:auto}
    
    /* Accessibility */
    @media (prefers-reduced-motion: reduce) {
      .card,.btn,.opt{transition:none}
      .card:hover,.btn:hover,.opt:hover{transform:none}
    }
    
    /* Dark mode support */
    @media (prefers-color-scheme: light) {
      :root {
        --bg: #f5f6f8;
        --surface: #ffffff;
        --text: #0b0c0d;
        --muted: #6c727a;
        --border: #e1e5e9;
      }
      .ph{background:transparent;color:#6c727a}
      .hero-img{background:#f8f9fa}
    }
  </style>
</head>
<body>
  <main id="main" class="page active">
    <div class="container">
      <header class="site">
        <h1 class="title">–ì–∏–¥ –ø–æ –ø–æ—Ä–æ–¥–∞–º –∫–æ—à–µ–∫</h1>
        <p class="subtitle">–ü–æ–º–æ–∂–µ–º –Ω–∞–π—Ç–∏ –∏–¥–µ–∞–ª—å–Ω—É—é –ø–æ—Ä–æ–¥—É –¥–ª—è –≤–∞—à–µ–≥–æ –¥–æ–º–∞</p>
        <div class="hero-image-container">
          <img id="hero-image" alt="–†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ –ø–æ—Ä–æ–¥—ã –∫–æ—à–µ–∫" class="hero-image" src="https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/hero.png">
        </div>
        <div class="search-row">
          <div class="search"><input id="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –ø–æ—Ä–æ–¥–∞–º..." /></div>
        </div>
        <button class="btn btn--primary" id="to-quiz-top" style="margin-top: 16px; width: 100%; max-width: 300px; margin-left: auto; margin-right: auto; display: block;">üîç –ü–æ–¥–æ–±—Ä–∞—Ç—å –ø–æ—Ä–æ–¥—É</button>
      </header>

      <section>
        <h2 class="section-title">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ—Ä–æ–¥</h2>
        <div id="cats-cats" class="grid"></div>
      </section>
      
      <section>
        <h2 class="section-title">–ö–æ—à–∫–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</h2>
        <div id="cat-list" class="cat-list-container"></div>
      </section>
      
      <section>
        <div id="search-grid" class="grid"></div>
      </section>
      
      <footer class="footer">
        <div class="container" style="display:flex;gap:16px;flex-wrap:wrap;justify-content:space-between">
          <div>–ö–æ–Ω—Ç–∞–∫—Ç—ã: hello@cats.example</div>
          <div style="display:flex;gap:12px">
            <a class="link" href="#" aria-label="Instagram">Instagram</a>
            <a class="link" href="#" aria-label="Telegram">Telegram</a>
            <a class="link" href="#" aria-label="VKontakte">VK</a>
          </div>
        </div>
      </footer>
    </div>
  </main>

  <section id="category" class="page">
    <div class="container">
      <div class="topbar">
        <button class="back" id="back-main" aria-label="–ù–∞–∑–∞–¥ –∫ –≥–ª–∞–≤–Ω–æ–π">‚Üê –ù–∞–∑–∞–¥</button>
        <h2 id="cat-title" class="title" style="margin:0"></h2>
      </div>
      <div id="cat-grid" class="grid"></div>
    </div>
  </section>

  <section id="detail" class="page">
    <div class="container">
      <div class="topbar">
        <button class="back" id="back-category" aria-label="–ù–∞–∑–∞–¥ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏">‚Üê –ö–∞—Ç–µ–≥–æ—Ä–∏—è</button>
        <h2 id="detail-title" class="title" style="margin:0"></h2>
      </div>

      <div class="detail-hero">
        <div class="hero-img" id="detail-image"></div>
        <div class="hero-info">
          <h3 id="detail-name" style="margin:0"></h3>
          <div class="muted">–ö–µ–º –≤—ã–≤–µ–¥–µ–Ω–∞: <span id="detail-origin"></span></div>
          <div class="chip" id="detail-suitable"></div>
        </div>
      </div>

      <div class="cols" style="margin-top:18px">
        <div class="box">
          <h4 style="margin:0 0 10px">–•–∞—Ä–∞–∫—Ç–µ—Ä</h4>
          <div id="detail-character" class="muted"></div>
        </div>
        <div class="box">
          <h4 style="margin:0 0 10px">–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —É—Ö–æ–¥–∞</h4>
          <div id="detail-care" class="muted"></div>
        </div>
        <div class="box">
          <h4 style="margin:0 0 10px">–ö–æ–º—É –ø–æ–¥—Ö–æ–¥–∏—Ç</h4>
          <div id="detail-suitable-detail" class="muted"></div>
        </div>
      </div>

      <div class="box" style="margin-top:18px">
        <h4 style="margin:0 0 10px">–ü–∏—Ç–æ–º–Ω–∏–∫–∏ –≤ –†–æ—Å—Å–∏–∏</h4>
        <div id="detail-breeders" class="list"></div>
      </div>
    </div>
  </section>

  <section id="quiz" class="page">
    <div class="container">
      <div class="topbar">
        <button class="back" id="back-main-from-quiz" aria-label="–ù–∞–∑–∞–¥ –∫ –≥–ª–∞–≤–Ω–æ–π">‚Üê –ù–∞–∑–∞–¥</button>
        <h2 class="title" style="margin:0">–ü–æ–¥–±–æ—Ä –ø–æ—Ä–æ–¥—ã</h2>
      </div>
      <div class="quiz" id="quiz-wrap"></div>
      <div style="display:flex;gap:12px;margin-top:8px;flex-wrap:wrap">
        <button class="btn" id="reset-quiz">–°–±—Ä–æ—Å–∏—Ç—å</button>
        <button class="btn btn--primary" id="show-results">–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
      </div>
      <section style="margin-top:20px">
        <h3 class="section-title">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
        <div id="results-grid" class="grid"></div>
      </section>
    </div>
  </section>

  <script>
    // Optimized JavaScript with performance improvements
    const appData = {
      categories: {
        longhair: { name: "–î–ª–∏–Ω–Ω–æ—à–µ—Ä—Å—Ç–Ω—ã–µ –ø–æ—Ä–æ–¥—ã" },
        shorthair: { name: "–ö–æ—Ä–æ—Ç–∫–æ—à–µ—Ä—Å—Ç–Ω—ã–µ –ø–æ—Ä–æ–¥—ã" },
        hairless: { name: "–ë–µ—Å—à–µ—Ä—Å—Ç–Ω—ã–µ –ø–æ—Ä–æ–¥—ã" },
        exotic: { name: "–≠–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏–µ –∏ —Ä–µ–¥–∫–∏–µ –ø–æ—Ä–æ–¥—ã" }
      },
      breeds: [
        // –î–ª–∏–Ω–Ω–æ—à–µ—Ä—Å—Ç–Ω—ã–µ –ø–æ—Ä–æ–¥—ã
        {
          id:"maine_coon", category:"longhair", name:"–ú–µ–π–Ω-–∫—É–Ω",
          short:"–ö—Ä—É–ø–Ω–∞—è –¥—Ä—É–∂–µ–ª—é–±–Ω–∞—è –ø–æ—Ä–æ–¥–∞ —Å —Ä—ã—Å—å–∏–º–∏ —É—à–∞–º–∏.",
          origin:"–°–®–ê, —à—Ç–∞—Ç –ú—ç–Ω",
          suitable:"–î–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ–º–µ–π —Å –¥–µ—Ç—å–º–∏",
          character:"–î—Ä—É–∂–µ–ª—é–±–Ω—ã–µ, –æ–±—â–∏—Ç–µ–ª—å–Ω—ã–µ, –∏–≥—Ä–∏–≤—ã–µ, —Ö–æ—Ä–æ—à–æ –ª–∞–¥—è—Ç —Å –¥–µ—Ç—å–º–∏.",
          care:"–†–∞—Å—á–µ—Å—ã–≤–∞—Ç—å 2‚Äì3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é, –ø—Ä–æ—Å—Ç–æ—Ä –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.",
          suitableDetail:"–ò–¥–µ–∞–ª—å–Ω—ã –¥–ª—è —Å–µ–º–µ–π, –ª—é–±—è—â–∏—Ö –∞–∫—Ç–∏–≤–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ —Å –ø–∏—Ç–æ–º—Ü–µ–º.",
          image:"https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/main-kun.jpeg",
          breeders:[
            {name:"–†—É—Å—Å–∫–∏–µ –≥–∏–≥–∞–Ω—Ç—ã", ig:"@russian_giants_mainecoon"},
            {name:"–°–µ–≤–µ—Ä–Ω—ã–π –≤–µ—Ç–µ—Ä", ig:"@north_wind_coons"}
          ],
          traits:{experience:"medium", space:"high", care:"medium", activity:"medium", children:"high", special_care:"medium", exotic:"low"}
        },
        {
          id:"siberian", category:"longhair", name:"–°–∏–±–∏—Ä—Å–∫–∞—è –∫–æ—à–∫–∞",
          short:"–ü—É—à–∏—Å—Ç–∞—è —Ä—É—Å—Å–∫–∞—è –∫—Ä–∞—Å–∞–≤–∏—Ü–∞ —Å –≥–∏–ø–æ–∞–ª–ª–µ—Ä–≥–µ–Ω–Ω–æ–π —à–µ—Ä—Å—Ç—å—é.",
          origin:"–†–æ—Å—Å–∏—è, –°–∏–±–∏—Ä—å",
          suitable:"–î–ª—è —Å–µ–º–µ–π —Å –∞–ª–ª–µ—Ä–≥–∏–µ–π",
          character:"–£–º–Ω—ã–µ, –ø—Ä–µ–¥–∞–Ω–Ω—ã–µ, –∏–≥—Ä–∏–≤—ã–µ, —Ö–æ—Ä–æ—à–æ –ª–∞–¥—è—Ç —Å –¥–µ—Ç—å–º–∏ –∏ –∂–∏–≤–æ—Ç–Ω—ã–º–∏.",
          care:"–†–∞—Å—á–µ—Å—ã–≤–∞—Ç—å 2‚Äì3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ –ø–µ—Ä–∏–æ–¥ –ª–∏–Ω—å–∫–∏.",
          suitableDetail:"–û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è —Å–µ–º–µ–π —Å –¥–µ—Ç—å–º–∏ –∏ –¥—Ä—É–≥–∏–º–∏ –∂–∏–≤–æ—Ç–Ω—ã–º–∏.",
          image:"https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/siberian.jpeg",
          breeders:[
            {name:"–°–∏–±–∏—Ä—Å–∫–∏–µ –∫—Ä–∞—Å–∞–≤–∏—Ü—ã", ig:"@siberian_beauties"},
            {name:"–ú–æ—Ä–æ–∑–Ω—ã–µ –º—É—Ä–ª—ã–∫–∏", ig:"@frosty_purrs"}
          ],
          traits:{experience:"medium", space:"medium", care:"medium", activity:"medium", children:"high", special_care:"low", exotic:"low"}
        },
        {
          id:"persian", category:"longhair", name:"–ü–µ—Ä—Å–∏–¥—Å–∫–∞—è –∫–æ—à–∫–∞",
          short:"–†–æ—Å–∫–æ—à–Ω–∞—è –¥–ª–∏–Ω–Ω–æ—à–µ—Ä—Å—Ç–Ω–∞—è –ø–æ—Ä–æ–¥–∞ —Å –ø–ª–æ—Å–∫–æ–π –º–æ—Ä–¥–æ—á–∫–æ–π.",
          origin:"–ü–µ—Ä—Å–∏—è (–ò—Ä–∞–Ω)",
          suitable:"–î–ª—è —Å–ø–æ–∫–æ–π–Ω—ã—Ö –¥–æ–º–æ–≤",
          character:"–°–ø–æ–∫–æ–π–Ω—ã–µ, –ª–∞—Å–∫–æ–≤—ã–µ, —Ç–∏—Ö–∏–µ, –ª—é–±—è—Ç –∫–æ–º—Ñ–æ—Ä—Ç –∏ –ø–æ–∫–æ–π.",
          care:"–ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ —Ä–∞—Å—á–µ—Å—ã–≤–∞–Ω–∏–µ, —É—Ö–æ–¥ –∑–∞ –≥–ª–∞–∑–∞–º–∏ –∏ –Ω–æ—Å–æ–º.",
          suitableDetail:"–ò–¥–µ–∞–ª—å–Ω—ã –¥–ª—è —Å–ø–æ–∫–æ–π–Ω—ã—Ö –¥–æ–º–æ–≤ –±–µ–∑ –º–∞–ª–µ–Ω—å–∫–∏—Ö –¥–µ—Ç–µ–π.",
          image:"https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/persian.jpeg",
          breeders:[
            {name:"–ü–µ—Ä—Å–∏–¥—Å–∫–∏–µ –ø—Ä–∏–Ω—Ü–µ—Å—Å—ã", ig:"@persian_princesses"},
            {name:"–†–æ—Å–∫–æ—à–Ω—ã–µ –º—É—Ä–ª—ã–∫–∏", ig:"@luxury_purrs"}
          ],
          traits:{experience:"medium", space:"low", care:"high", activity:"low", children:"low", special_care:"high", exotic:"low"}
        },
        
        // –ö–æ—Ä–æ—Ç–∫–æ—à–µ—Ä—Å—Ç–Ω—ã–µ –ø–æ—Ä–æ–¥—ã
        {
          id:"british", category:"shorthair", name:"–ë—Ä–∏—Ç–∞–Ω—Å–∫–∞—è –∫–æ—Ä–æ—Ç–∫–æ—à–µ—Ä—Å—Ç–Ω–∞—è",
          short:"–°–ø–æ–∫–æ–π–Ω–∞—è –ø–ª—é—à–µ–≤–∞—è –∫–ª–∞—Å—Å–∏–∫–∞ —Å –∫—Ä—É–≥–ª—ã–º–∏ –≥–ª–∞–∑–∞–º–∏.",
          origin:"–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è", 
          suitable:"–î–ª—è –∑–∞–Ω—è—Ç—ã—Ö –ª—é–¥–µ–π",
          character:"–°–¥–µ—Ä–∂–∞–Ω–Ω—ã–µ, –ø—Ä–µ–¥–∞–Ω–Ω—ã–µ, —Ç–µ—Ä–ø–µ–ª–∏–≤—ã–µ, –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ.",
          care:"–ü—Ä–æ—Å—Ç–æ–π —É—Ö–æ–¥: –≤—ã—á–µ—Å—ã–≤–∞–Ω–∏–µ 1‚Äì2 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é.",
          suitableDetail:"–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –∫–≤–∞—Ä—Ç–∏—Ä –∏ —Ä–∞–∑–º–µ—Ä–µ–Ω–Ω–æ–≥–æ —Ä–∏—Ç–º–∞.",
          image:"https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/british.jpeg",
          breeders:[{name:"–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–µ –±—Ä–∏—Ç–∞–Ω—Ü—ã", ig:"@royal_british_moscow"}],
          traits:{experience:"low", space:"low", care:"low", activity:"low", children:"medium", special_care:"low", exotic:"low"}
        },
        {
          id:"russian_blue", category:"shorthair", name:"–†—É—Å—Å–∫–∞—è –≥–æ–ª—É–±–∞—è",
          short:"–≠–ª–µ–≥–∞–Ω—Ç–Ω–∞—è –∫–æ—à–∫–∞ —Å —Å–µ—Ä–µ–±—Ä–∏—Å—Ç–æ-–≥–æ–ª—É–±–æ–π —à–µ—Ä—Å—Ç—å—é.",
          origin:"–†–æ—Å—Å–∏—è, –ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫",
          suitable:"–î–ª—è —Ç–∏—Ö–∏—Ö –¥–æ–º–æ–≤",
          character:"–°–ø–æ–∫–æ–π–Ω—ã–µ, —É–º–Ω—ã–µ, –ø—Ä–µ–¥–∞–Ω–Ω—ã–µ, –Ω–µ–º–Ω–æ–≥–æ –∑–∞—Å—Ç–µ–Ω—á–∏–≤—ã–µ.",
          care:"–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ö–æ–¥, —à–µ—Ä—Å—Ç—å –Ω–µ –ª–∏–Ω—è–µ—Ç —Å–∏–ª—å–Ω–æ.",
          suitableDetail:"–û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –∫–≤–∞—Ä—Ç–∏—Ä –∏ —Ç–∏—Ö–∏—Ö –¥–æ–º–æ–≤.",
          image:"https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/russian_blue.jpeg",
          breeders:[
            {name:"–°–µ–≤–µ—Ä–Ω—ã–µ –≥–æ–ª—É–±–∫–∏", ig:"@northern_blues"},
            {name:"–ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫–∏–µ –∫—Ä–∞—Å–∞–≤–∏—Ü—ã", ig:"@arkhangelsk_beauties"}
          ],
          traits:{experience:"low", space:"low", care:"low", activity:"low", children:"medium", special_care:"low", exotic:"low"}
        },
        {
          id:"abyssinian", category:"shorthair", name:"–ê–±–∏—Å—Å–∏–Ω—Å–∫–∞—è –∫–æ—à–∫–∞",
          short:"–ê–∫—Ç–∏–≤–Ω–∞—è –∏ –ª—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–∞—è –∫–æ—à–∫–∞ —Å —Ç–∏–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —à–µ—Ä—Å—Ç—å—é.",
          origin:"–≠—Ñ–∏–æ–ø–∏—è (–ê–±–∏—Å—Å–∏–Ω–∏—è)",
          suitable:"–î–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ–º–µ–π",
          character:"–û—á–µ–Ω—å –∞–∫—Ç–∏–≤–Ω—ã–µ, –ª—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω—ã–µ, –∏–≥—Ä–∏–≤—ã–µ, —É–º–Ω—ã–µ.",
          care:"–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ö–æ–¥, –∫–æ—Ä–æ—Ç–∫–∞—è —à–µ—Ä—Å—Ç—å.",
          suitableDetail:"–ù—É–∂–¥–∞—é—Ç—Å—è –≤ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ –≤–Ω–∏–º–∞–Ω–∏–∏, –Ω–µ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –ª–µ–Ω–∏–≤—ã—Ö —Ö–æ–∑—è–µ–≤.",
          image:"https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/abissin.jpeg",
          breeders:[
            {name:"–ê–±–∏—Å—Å–∏–Ω—Å–∫–∏–µ –ø—Ä–∏–Ω—Ü–µ—Å—Å—ã", ig:"@abyssinian_princesses"},
            {name:"–≠—Ñ–∏–æ–ø—Å–∫–∏–µ –∫—Ä–∞—Å–∞–≤–∏—Ü—ã", ig:"@ethiopian_beauties"}
          ],
          traits:{experience:"medium", space:"medium", care:"low", activity:"high", children:"high", special_care:"low", exotic:"medium"}
        },
        
        // –ë–µ—Å—à–µ—Ä—Å—Ç–Ω—ã–µ –ø–æ—Ä–æ–¥—ã
        {
          id:"sphynx", category:"hairless", name:"–ö–∞–Ω–∞–¥—Å–∫–∏–π —Å—Ñ–∏–Ω–∫—Å",
          short:"–¢—ë–ø–ª–∞—è –∫–æ–∂–∞ –∏ —ç–∫—Å—Ç—Ä–∞–≤–µ—Ä—Ç–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –±–µ–∑ —à–µ—Ä—Å—Ç–∏.",
          origin:"–ö–∞–Ω–∞–¥–∞", 
          suitable:"–î–ª—è –ª—é–¥–µ–π —Å –∞–ª–ª–µ—Ä–≥–∏–µ–π",
          character:"–û—á–µ–Ω—å –æ–±—â–∏—Ç–µ–ª—å–Ω—ã–µ –∏ –ª–∞—Å–∫–æ–≤—ã–µ, –ª—é–±—è—Ç –≤–Ω–∏–º–∞–Ω–∏–µ.",
          care:"–£—Ö–æ–¥ –∑–∞ –∫–æ–∂–µ–π, –∫–æ–Ω—Ç—Ä–æ–ª—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã, —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤–∞–Ω–Ω—ã.",
          suitableDetail:"–ù—É–∂–¥–∞—é—Ç—Å—è –≤ —Ç–µ–ø–ª–µ –∏ –≤–Ω–∏–º–∞–Ω–∏–∏, –¥—Ä—É–∂–µ–ª—é–±–Ω—ã –∫ –¥–µ—Ç—è–º.",
          image:"https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/sfinks.jpeg",
          breeders:[{name:"–õ—É–Ω–Ω—ã–µ –∫–æ—à–∫–∏", ig:"@moon_sphynx_cats"}],
          traits:{experience:"high", space:"medium", care:"high", activity:"medium", children:"medium", special_care:"high", exotic:"high"}
        },
        
        // –≠–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ—Ä–æ–¥—ã
        {
          id:"bengal", category:"exotic", name:"–ë–µ–Ω–≥–∞–ª—å—Å–∫–∞—è –∫–æ—à–∫–∞",
          short:"–î–æ–º–∞—à–Ω–∏–π –ª–µ–æ–ø–∞—Ä–¥ ‚Äî –∞–∫—Ç–∏–≤–Ω–∞—è –∏ —É–º–Ω–∞—è —Å –¥–∏–∫–∏–º –æ–∫—Ä–∞—Å–æ–º.",
          origin:"–°–®–ê", 
          suitable:"–î–ª—è –æ–ø—ã—Ç–Ω—ã—Ö –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤",
          character:"–û—á–µ–Ω—å –∞–∫—Ç–∏–≤–Ω—ã –∏ –ª—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω—ã, –Ω—É–∂–¥–∞—é—Ç—Å—è –≤ —Å—Ç–∏–º—É–ª—è—Ü–∏–∏.",
          care:"–ú–Ω–æ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –∫–æ—Ä–æ—Ç–∫–∞—è —à–µ—Ä—Å—Ç—å, –∏–≥—Ä–æ–≤—ã–µ –∫–æ–º–ø–ª–µ–∫—Å—ã.",
          suitableDetail:"–õ—É—á—à–µ –≤ –ø—Ä–æ—Å—Ç–æ—Ä–Ω–æ–º –¥–æ–º–µ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ —Å—Ç–∏–º—É–ª—è—Ü–∏—è.",
          image:"https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/bengal.jpeg",
          breeders:[{name:"–î–∏–∫–∞—è –∫—Ä–∞—Å–æ—Ç–∞", ig:"@wild_beauty_bengals"}],
          traits:{experience:"high", space:"high", care:"low", activity:"high", children:"low", special_care:"medium", exotic:"high"}
        },
        {
          id:"toyger", category:"exotic", name:"–¢–æ–π–≥–µ—Ä",
          short:"–ú–∏–Ω–∏–∞—Ç—é—Ä–Ω—ã–π —Ç–∏–≥—Ä —Å –ø–æ–ª–æ—Å–∞—Ç—ã–º –æ–∫—Ä–∞—Å–æ–º.",
          origin:"–°–®–ê",
          suitable:"–î–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π —ç–∫–∑–æ—Ç–∏–∫–∏",
          character:"–ê–∫—Ç–∏–≤–Ω—ã–µ, –∏–≥—Ä–∏–≤—ã–µ, –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–µ, —Ö–æ—Ä–æ—à–æ –ª–∞–¥—è—Ç —Å –¥–µ—Ç—å–º–∏.",
          care:"–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —É—Ö–æ–¥, –º–Ω–æ–≥–æ –∏–≥—Ä –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.",
          suitableDetail:"–û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è —Å–µ–º–µ–π —Å –¥–µ—Ç—å–º–∏, –ª—é–±—è—Ç –∏–≥—Ä—ã.",
          image:"https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/toiger.jpeg",
          breeders:[
            {name:"–ú–∏–Ω–∏-—Ç–∏–≥—Ä—ã", ig:"@mini_tigers"},
            {name:"–ü–æ–ª–æ—Å–∞—Ç—ã–µ –∫—Ä–∞—Å–∞–≤—Ü—ã", ig:"@striped_beauties"}
          ],
          traits:{experience:"medium", space:"medium", care:"low", activity:"high", children:"high", special_care:"low", exotic:"high"}
        }
      ],
      questions:[
        {id:"experience", q:"–í–∞—à –æ–ø—ã—Ç —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –∫–æ—à–µ–∫?", opts:[
          {v:"low",t:"–ù–æ–≤–∏—á–æ–∫"},{v:"medium",t:"–ï—Å—Ç—å –æ–ø—ã—Ç"},{v:"high",t:"–≠–∫—Å–ø–µ—Ä—Ç"}
        ]},
        {id:"space", q:"–†–∞–∑–º–µ—Ä –∂–∏–ª—å—è?", opts:[
          {v:"low",t:"–ú–∞–ª–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞"},{v:"medium",t:"–ë–æ–ª—å—à–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞"},{v:"high",t:"–î–æ–º"}
        ]},
        {id:"care", q:"–í—Ä–µ–º—è –Ω–∞ —É—Ö–æ–¥?", opts:[
          {v:"low",t:"–ú–∏–Ω–∏–º—É–º"},{v:"medium",t:"–°—Ä–µ–¥–Ω–µ"},{v:"high",t:"–ú–Ω–æ–≥–æ"}
        ]},
        {id:"activity", q:"–£—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏?", opts:[
          {v:"low",t:"–°–ø–æ–∫–æ–π–Ω–∞—è"},{v:"medium",t:"–£–º–µ—Ä–µ–Ω–Ω–∞—è"},{v:"high",t:"–û—á–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–∞—è"}
        ]},
        {id:"children", q:"–î–µ—Ç–∏ –≤ —Å–µ–º—å–µ?", opts:[
          {v:"low",t:"–ù–µ—Ç"},{v:"medium",t:"–î–æ—à–∫–æ–ª—å–Ω–∏–∫–∏"},{v:"high",t:"–®–∫–æ–ª—å–Ω–∏–∫–∏/–ø–æ–¥—Ä–æ—Å—Ç–∫–∏"}
        ]},
        {id:"special_care", q:"–ì–æ—Ç–æ–≤—ã –∫ –æ—Å–æ–±–æ–º—É —É—Ö–æ–¥—É?", opts:[
          {v:"low",t:"–ù–µ—Ç"},{v:"medium",t:"–ù–µ–º–Ω–æ–≥–æ"},{v:"high",t:"–ì–æ—Ç–æ–≤ –∫ —Å–ª–æ–∂–Ω–æ–º—É —É—Ö–æ–¥—É"}
        ]},
        {id:"exotic", q:"–ù—É–∂–Ω–∞ –ª–∏ –Ω–µ–æ–±—ã—á–Ω–æ—Å—Ç—å?", opts:[
          {v:"low",t:"–û–±—ã—á–Ω–∞—è"},{v:"medium",t:"–ù–µ–º–Ω–æ–≥–æ –Ω–µ–æ–±—ã—á–Ω–∞—è"},{v:"high",t:"–û—á–µ–Ω—å —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∞—è"}
        ]}
      ]
    };

    // State
    let currentCategory=null, quizAnswers={};

    // DOM Elements - cached for performance
    const pages = {main: byId("main"), category: byId("category"), detail: byId("detail"), quiz: byId("quiz")};
    const searchInput = byId("search");
    const searchGrid = byId("search-grid");
    const catsCats = byId("cats-cats");
    const catTitle = byId("cat-title");
    const catGrid = byId("cat-grid");
    const detailTitle = byId("detail-title");
    const detailImage = byId("detail-image");
    const detailName = byId("detail-name");
    const detailOrigin = byId("detail-origin");
    const detailSuitable = byId("detail-suitable");
    const detailChar = byId("detail-character");
    const detailCare = byId("detail-care");
    const detailSuitDet = byId("detail-suitable-detail");
    const detailBreeders = byId("detail-breeders");
    const quizWrap = byId("quiz-wrap");
    const resultsGrid = byId("results-grid");

    // Helpers
    function byId(id){return document.getElementById(id)}
    function show(page){
      Object.values(pages).forEach(p=>p.classList.remove("active"));
      pages[page].classList.add("active");
      window.scrollTo({top:0,behavior:"smooth"});
    }
    const allBreeds = () => appData.breeds;

    // Debounced search for better performance
    let searchTimeout;
    function debounce(func, wait) {
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(searchTimeout);
          func(...args);
        };
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(later, wait);
      };
    }

    // Render categories
    function renderMainCategories(){
      if (!catsCats) return;
      catsCats.innerHTML = "";
      const cats = [
        {id:"longhair", title:appData.categories.longhair.name},
        {id:"shorthair", title:appData.categories.shorthair.name},
        {id:"hairless", title:appData.categories.hairless.name},
        {id:"exotic", title:appData.categories.exotic.name}
      ];
      cats.forEach(cat=>{
        const el = card({
          title:cat.title,
          subtitle:"–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å",
          onClick:()=>openCategory(cat.id),
          categoryId: cat.id
        });
        catsCats.appendChild(el);
      });
    }

    // Generic card with accessibility improvements
    function card({title, subtitle, onClick, chip, image, categoryId}){
      const el=document.createElement("article"); 
      el.className="card"; 
      el.tabIndex=0;
      el.setAttribute('role', 'button');
      el.setAttribute('aria-label', `${title}. ${subtitle}`);
      
      const ph=document.createElement("div"); 
      ph.className="ph"; 
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
      let imageUrl = image;
      if (!imageUrl && categoryId && window.categoryImages && window.categoryImages[categoryId]) {
        imageUrl = window.categoryImages[categoryId];
      }
      
      if (imageUrl) {
        const img = document.createElement("img");
        img.src = imageUrl;
        img.alt = title;
        img.style.width = "100%";
        img.style.height = "100%";
        img.style.objectFit = "cover";
        img.style.borderRadius = "12px";
        img.style.maxWidth = "100%";
        img.style.maxHeight = "100%";
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        img.onerror = function() {
          ph.textContent = "–§–æ—Ç–æ";
          ph.setAttribute('aria-hidden', 'true');
        };
        ph.appendChild(img);
      } else {
        ph.textContent="–§–æ—Ç–æ";
        ph.setAttribute('aria-hidden', 'true');
      }
      
      const h3=document.createElement("h3"); 
      h3.textContent=title;
      
      const p=document.createElement("div"); 
      p.className="muted"; 
      p.textContent=subtitle||"";
      
      el.appendChild(ph); 
      el.appendChild(h3); 
      
      if(chip){
        const c=document.createElement("div"); 
        c.className="chip"; 
        c.textContent=chip; 
        el.appendChild(c);
      } 
      
      el.appendChild(p);
      
      // Event listeners with passive option for better performance
      el.addEventListener("click",onClick, {passive: true}); 
      el.addEventListener("keypress",e=>{if(e.key==="Enter"||e.key===" ") onClick()}, {passive: true});
      
      return el;
    }

    // Optimized search with debouncing
    const debouncedSearch = debounce((query) => {
      const results = query ? allBreeds().filter(b=>
        b.name.toLowerCase().includes(query)||b.short.toLowerCase().includes(query)
      ) : [];
      renderBreedCards(results, searchGrid, true);
    }, 300);

    searchInput.addEventListener("input", (e)=>{
      debouncedSearch(e.target.value.trim().toLowerCase());
    });

    // Category
    function openCategory(id){
      currentCategory=id;
      catTitle.textContent = appData.categories[id].name;
      const items = allBreeds().filter(b=>b.category===id);
      catGrid.innerHTML=""; 
      renderBreedCards(items, catGrid);
      show("category");
    }

    // Breed cards
    function renderBreedCards(list, target, compact=false){
      if (!target) return;
      target.innerHTML="";
      
      // Use DocumentFragment for better performance
      const fragment = document.createDocumentFragment();
      
      list.forEach(b=>{
        const el = card({
          title:b.name,
          subtitle:b.short,
          chip:b.suitable,
          image:b.image,
          onClick:()=>openBreed(b)
        });
        if(compact){
          const ph = el.querySelector(".ph");
          if (ph) ph.style.height="140px";
        }
        fragment.appendChild(el);
      });
      
      target.appendChild(fragment);
    }

    // Detail
    function openBreed(b){
      detailTitle.textContent = b.name;
      detailName.textContent = b.name;
      detailOrigin.textContent = b.origin;
      detailSuitable.textContent = b.suitable;
      detailChar.textContent = b.character;
      detailCare.textContent = b.care;
      detailSuitDet.textContent = b.suitableDetail;
      
      // Update detail image
      if (detailImage) {
        detailImage.innerHTML = "";
        if (b.image) {
          const img = document.createElement("img");
          img.src = b.image;
          img.alt = b.name;
          img.style.width = "100%";
          img.style.height = "100%";
          img.style.objectFit = "contain";
          img.style.borderRadius = "14px";
          img.style.maxWidth = "100%";
          img.style.maxHeight = "100%";
          // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
          img.onerror = function() {
            detailImage.textContent = "–§–æ—Ç–æ";
          };
          detailImage.appendChild(img);
        } else {
          detailImage.textContent = "–§–æ—Ç–æ";
        }
      }
      
      detailBreeders.innerHTML = b.breeders.map(x=>(
        `<div class="breeder">
          <span>${x.name}</span>
          <a class="link" target="_blank" href="https://instagram.com/${x.ig.replace('@','')}" rel="noopener noreferrer">${x.ig}</a>
        </div>`
      )).join("");
      show("detail");
    }

    // Quiz
    function renderQuiz(){
      if (!quizWrap) return;
      quizWrap.innerHTML="";
      quizAnswers={};
      
      appData.questions.forEach(q=>{
        const container=document.createElement("div"); 
        container.className="q";
        
        const h=document.createElement("div"); 
        h.textContent=q.q; 
        container.appendChild(h);
        
        const opts=document.createElement("div"); 
        opts.className="opts";
        
        q.opts.forEach(o=>{
          const lbl=document.createElement("label"); 
          lbl.className="opt"; 
          lbl.textContent=o.t;
          lbl.setAttribute('role', 'button');
          lbl.setAttribute('tabindex', '0');
          
          lbl.addEventListener("click",()=>{
            quizAnswers[q.id]=o.v; 
            [...opts.children].forEach(x=>x.classList.remove('active')); 
            lbl.classList.add('active');
          }, {passive: true});
          
          lbl.addEventListener("keypress", (e) => {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              lbl.click();
            }
          }, {passive: true});
          
          opts.appendChild(lbl);
        });
        
        container.appendChild(opts);
        quizWrap.appendChild(container);
      });
    }

    function scoreMatch(breed){
      const u=quizAnswers; 
      let score=0, max=0;
      const weight = 1;
      Object.keys(breed.traits).forEach(k=>{
        if(!u[k]) return;
        max+=3*weight;
        if(u[k]===breed.traits[k]) score+=3*weight;
        else if(compatible(u[k],breed.traits[k])) score+=2*weight;
        else if(acceptable(u[k],breed.traits[k])) score+=1*weight;
      });
      return max? Math.round(score/max*100):0;
    }
    
    function compatible(u,b){
      const m={low:['medium'],medium:['low','high'],high:['medium']};
      return (m[u]||[]).includes(b);
    }
    
    function acceptable(){return false}

    function resultsFromQuiz(){
      // –û—á–∏—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º –Ω–æ–≤—ã—Ö
      resultsGrid.innerHTML = "";
      
      console.log('–û—Ç–≤–µ—Ç—ã –∫–≤–∏–∑–∞:', quizAnswers);
      
      const rated = allBreeds()
        .map(b=>({breed:b, pct:scoreMatch(b)}))
        .filter(x=>x.pct>0)
        .sort((a,b)=>b.pct-a.pct)
        .slice(0,3);
        
      console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–≤–∏–∑–∞:', rated);
        
      if (rated.length > 0) {
        rated.forEach(x => {
          const card = document.createElement("article");
          card.className = "card";
          
          const ph = document.createElement("div");
          ph.className = "ph";
          
          if (x.breed.image) {
            const img = document.createElement("img");
            img.src = x.breed.image;
            img.alt = x.breed.name;
            img.style.cssText = "width:100%;height:100%;object-fit:contain;border-radius:12px";
            ph.appendChild(img);
          } else {
            ph.textContent = "–§–æ—Ç–æ";
          }
          
          const h3 = document.createElement("h3");
          h3.textContent = x.breed.name;
          
          const pct = document.createElement("div");
          pct.className = "muted";
          pct.textContent = `${x.pct}% —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ`;
          
          const suitable = document.createElement("div");
          suitable.className = "muted";
          suitable.style.marginTop = "6px";
          suitable.textContent = x.breed.suitable;
          
          const button = document.createElement("button");
          button.className = "btn btn--primary";
          button.style.marginTop = "10px";
          button.textContent = "–ü–æ–¥—Ä–æ–±–Ω–µ–µ";
          button.onclick = () => openBreedFromResults(x.breed.id);
          
          card.appendChild(ph);
          card.appendChild(h3);
          card.appendChild(pct);
          card.appendChild(suitable);
          card.appendChild(button);
          
          resultsGrid.appendChild(card);
        });
      } else {
        resultsGrid.innerHTML = `<div class="muted">–ù–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π ‚Äî –ø–æ–º–µ–Ω—è–π—Ç–µ –æ—Ç–≤–µ—Ç—ã</div>`;
      }
    }
    
    window.openBreedFromResults = (id)=>openBreed(allBreeds().find(b=>b.id===id));

    // Navigation with passive event listeners
    byId("back-main").onclick=()=>show("main");
    byId("back-category").onclick=()=>show("category");
    byId("to-quiz-top").onclick=()=>{renderQuiz(); show("quiz")};
    byId("back-main-from-quiz").onclick=()=>show("main");
    byId("show-results").onclick=resultsFromQuiz;
    byId("reset-quiz").onclick=()=>renderQuiz();

    // Initialize with error handling
    function init() {
      try {
        renderMainCategories();
        // –°–∫—Ä—ã–≤–∞–µ–º —Å–µ–∫—Ü–∏—é "–ö–æ—à–∫–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö" –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        const catListElement = document.getElementById('cat-list');
        const catSection = catListElement ? catListElement.closest('section') : null;
        if (catSection) {
          catSection.style.display = 'none';
        }
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –¥–ª–∏–Ω–Ω–æ—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥ —á–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É
        setTimeout(() => {
          window.forceSetLonghairImageDirect();
          window.forceSetShorthairImageDirect();
          window.forceSetHairlessImageDirect();
          window.forceSetExoticImageDirect();
          ensureEqualCardSizes();
        }, 500);
        
        console.log('Application initialized successfully');
      } catch (error) {
        console.error('Error initializing application:', error);
      }
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    function updateCategoryCardsWithImages() {
      console.log('–û–±–Ω–æ–≤–ª—è–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π...');
      console.log('window.categoryImages:', window.categoryImages);
      
      if (!window.categoryImages) {
        console.log('–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫–∞—Ç–µ–≥–æ—Ä–∏–π');
        return;
      }
      
      const catsCatsElement = document.getElementById('cats-cats');
      if (!catsCatsElement) {
        console.log('–≠–ª–µ–º–µ–Ω—Ç cats-cats –Ω–µ –Ω–∞–π–¥–µ–Ω');
        return;
      }
      
      const categoryCards = catsCatsElement.querySelectorAll('.card');
      console.log('–ù–∞–π–¥–µ–Ω–æ –∫–∞—Ä—Ç–æ—á–µ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:', categoryCards.length);
      
      categoryCards.forEach((card, index) => {
        const imageContainer = card.querySelector('.ph');
        if (imageContainer) {
          console.log(`–ö–∞—Ä—Ç–æ—á–∫–∞ ${index}:`, imageContainer.textContent);
          
          if (imageContainer.textContent === '–§–æ—Ç–æ') {
            // –ü–æ–ª—É—á–∞–µ–º ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞
            const title = card.querySelector('h3').textContent;
            let categoryId = '';
            
            if (title.includes('–î–ª–∏–Ω–Ω–æ—à–µ—Ä—Å—Ç–Ω—ã–µ')) categoryId = 'longhair';
            else if (title.includes('–ö–æ—Ä–æ—Ç–∫–æ—à–µ—Ä—Å—Ç–Ω—ã–µ')) categoryId = 'shorthair';
            else if (title.includes('–ë–µ—Å—à–µ—Ä—Å—Ç–Ω—ã–µ')) categoryId = 'hairless';
            else if (title.includes('–≠–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏–µ')) categoryId = 'exotic';
            
            console.log(`–ö–∞—Ç–µ–≥–æ—Ä–∏—è –¥–ª—è "${title}": ${categoryId}`);
            
            if (categoryId && window.categoryImages[categoryId]) {
              console.log(`–ó–∞–≥—Ä—É–∂–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è ${categoryId}:`, window.categoryImages[categoryId]);
              
              // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
              imageContainer.innerHTML = '';
              
              // –°–æ–∑–¥–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
              const img = document.createElement('img');
              img.src = window.categoryImages[categoryId];
              img.alt = title;
              img.style.cssText = `
                width: 100%;
                height: 100%;
                object-fit: contain;
                border-radius: 12px;
                background-color: rgb(23, 26, 28);
              `;
              
              // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
              img.onerror = function() {
                console.log('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è', categoryId);
                imageContainer.textContent = "–§–æ—Ç–æ";
                imageContainer.setAttribute('aria-hidden', 'true');
              };
              
              // –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
              img.onload = function() {
                console.log('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –¥–ª—è', categoryId);
                imageContainer.removeAttribute('aria-hidden');
              };
              
              imageContainer.appendChild(img);
            } else {
              console.log(`–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ${categoryId}`);
            }
          }
        }
      });
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
    window.forceUpdateCategoryImages = function() {
      console.log('–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫–∞—Ç–µ–≥–æ—Ä–∏–π...');
      updateCategoryCardsWithImages();
    };
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫–∞—Ç–µ–≥–æ—Ä–∏–π
    window.setAllCategoryImages = function() {
      console.log('–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π...');
      
      const categoryImages = {
        longhair: 'https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/long-haired.png',
        shorthair: 'https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/short-haired.png',
        hairless: 'https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/hairless.jpg',
        exotic: 'https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/exotic.png'
      };
      
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
      window.categoryImages = categoryImages;
      
      // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏
      updateCategoryCardsWithImages();
      
      console.log('–í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:', categoryImages);
    };
    
    // –ö—ç—à –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    const imageCache = new Map();
    
    // –§—É–Ω–∫—Ü–∏—è –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    function preloadImages() {
      const imageUrls = [
        'https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/hero.png',
        'https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/long-haired.png',
        'https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/hairless.png'
      ];
      
      imageUrls.forEach(url => {
        const img = new Image();
        img.onload = function() {
          console.log('–ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:', url);
          imageCache.set(url, img);
        };
        img.src = url;
      });
    }
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    preloadImages();
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ –≤—Å–µ—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
    function ensureEqualCardSizes() {
      const cards = document.querySelectorAll('.card');
      cards.forEach(card => {
        // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ä–∞–∑–º–µ—Ä—ã
        card.style.minWidth = '280px';
        card.style.width = '100%';
        card.style.flex = '1 1 280px';
        card.style.maxWidth = 'calc(50% - var(--gap-6)/2)';
      });
      console.log('–†–∞–∑–º–µ—Ä—ã –≤—Å–µ—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã');
    }
    
    // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞
    window.ensureEqualCardSizes = ensureEqualCardSizes;
    
    // –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    function loadImageOptimized(src, alt, container, onLoad, onError) {
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à
      if (imageCache.has(src)) {
        const cachedImg = imageCache.get(src);
        container.innerHTML = '';
        container.appendChild(cachedImg.cloneNode());
        if (onLoad) onLoad();
        return;
      }
      
      // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
      const img = new Image();
      img.src = src;
      img.alt = alt;
      img.style.cssText = `
        width: 100%;
        height: 100%;
        object-fit: contain;
        border-radius: 12px;
        display: block;
        background-color: rgb(23, 26, 28);
      `;
      
      // –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
      img.onload = function() {
        // –ö—ç—à–∏—Ä—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        imageCache.set(src, img.cloneNode());
        container.innerHTML = '';
        container.appendChild(img);
        if (onLoad) onLoad();
      };
      
      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
      img.onerror = function() {
        if (onError) onError();
      };
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ—Ä–æ—Ç–∫–æ—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥
    window.forceSetShorthairImageDirect = function() {
      console.log('–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–æ—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥...');
      
      const catsCatsElement = document.getElementById('cats-cats');
      if (!catsCatsElement) {
        console.error('–≠–ª–µ–º–µ–Ω—Ç cats-cats –Ω–µ –Ω–∞–π–¥–µ–Ω');
        return;
      }
      
      const categoryCards = catsCatsElement.querySelectorAll('.card');
      categoryCards.forEach(card => {
        const title = card.querySelector('h3').textContent;
        if (title.includes('–ö–æ—Ä–æ—Ç–∫–æ—à–µ—Ä—Å—Ç–Ω—ã–µ')) {
          const imageContainer = card.querySelector('.ph');
          if (imageContainer) {
            console.log('–ù–∞–π–¥–µ–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ –∫–æ—Ä–æ—Ç–∫–æ—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ...');
            
            loadImageOptimized(
              'https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/short-haired.png',
              '–ö–æ—Ä–æ—Ç–∫–æ—à–µ—Ä—Å—Ç–Ω—ã–µ –ø–æ—Ä–æ–¥—ã',
              imageContainer,
              function() {
                console.log('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ short-haired.png —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ');
                imageContainer.removeAttribute('aria-hidden');
              },
              function() {
                console.log('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è short-haired.png');
                imageContainer.innerHTML = '<div style="color: white; text-align: center; padding: 20px;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</div>';
                imageContainer.setAttribute('aria-hidden', 'true');
              }
            );
            
            console.log('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ short-haired.png —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–æ—Ä–æ—Ç–∫–æ—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥');
          }
        }
      });
    };

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ—Ä–æ–¥
    window.forceSetExoticImageDirect = function() {
      console.log('–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ—Ä–æ–¥...');
      
      const catsCatsElement = document.getElementById('cats-cats');
      if (!catsCatsElement) {
        console.error('–≠–ª–µ–º–µ–Ω—Ç cats-cats –Ω–µ –Ω–∞–π–¥–µ–Ω');
        return;
      }
      
      const categoryCards = catsCatsElement.querySelectorAll('.card');
      categoryCards.forEach(card => {
        const title = card.querySelector('h3').textContent;
        if (title.includes('–≠–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏–µ')) {
          const imageContainer = card.querySelector('.ph');
          if (imageContainer) {
            console.log('–ù–∞–π–¥–µ–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ—Ä–æ–¥, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ...');
            
            loadImageOptimized(
              'https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/exotic.png',
              '–≠–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏–µ –∏ —Ä–µ–¥–∫–∏–µ –ø–æ—Ä–æ–¥—ã',
              imageContainer,
              function() {
                console.log('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ exotic.png —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –¥–ª—è —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ—Ä–æ–¥');
                imageContainer.removeAttribute('aria-hidden');
              },
              function() {
                console.log('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è exotic.png –¥–ª—è —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ—Ä–æ–¥');
                imageContainer.innerHTML = '<div style="color: white; text-align: center; padding: 20px;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</div>';
                imageContainer.setAttribute('aria-hidden', 'true');
              }
            );
            
            console.log('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ exotic.png —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ—Ä–æ–¥');
          }
        }
      });
    };

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–µ—Å—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥
    window.forceSetHairlessImageDirect = function() {
      console.log('–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–µ—Å—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥...');
      
      const catsCatsElement = document.getElementById('cats-cats');
      if (!catsCatsElement) {
        console.error('–≠–ª–µ–º–µ–Ω—Ç cats-cats –Ω–µ –Ω–∞–π–¥–µ–Ω');
        return;
      }
      
      const categoryCards = catsCatsElement.querySelectorAll('.card');
      categoryCards.forEach(card => {
        const title = card.querySelector('h3').textContent;
        if (title.includes('–ë–µ—Å—à–µ—Ä—Å—Ç–Ω—ã–µ')) {
          const imageContainer = card.querySelector('.ph');
          if (imageContainer) {
            console.log('–ù–∞–π–¥–µ–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ –±–µ—Å—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ...');
            
            loadImageOptimized(
              'https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/hairless.png',
              '–ë–µ—Å—à–µ—Ä—Å—Ç–Ω—ã–µ –ø–æ—Ä–æ–¥—ã',
              imageContainer,
              function() {
                console.log('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ hairless.png —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –¥–ª—è –±–µ—Å—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥');
                imageContainer.removeAttribute('aria-hidden');
              },
              function() {
                console.log('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è hairless.png –¥–ª—è –±–µ—Å—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥');
                imageContainer.innerHTML = '<div style="color: white; text-align: center; padding: 20px;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</div>';
                imageContainer.setAttribute('aria-hidden', 'true');
              }
            );
            
            console.log('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ hairless.png —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ –±–µ—Å—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥');
          }
        }
      });
    };

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª–∏–Ω–Ω–æ—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥
    window.forceSetLonghairImageDirect = function() {
      console.log('–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω–æ—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥...');
      
      const catsCatsElement = document.getElementById('cats-cats');
      if (!catsCatsElement) {
        console.error('–≠–ª–µ–º–µ–Ω—Ç cats-cats –Ω–µ –Ω–∞–π–¥–µ–Ω');
        return;
      }
      
      const categoryCards = catsCatsElement.querySelectorAll('.card');
      categoryCards.forEach(card => {
        const title = card.querySelector('h3').textContent;
        if (title.includes('–î–ª–∏–Ω–Ω–æ—à–µ—Ä—Å—Ç–Ω—ã–µ')) {
          const imageContainer = card.querySelector('.ph');
          if (imageContainer) {
            console.log('–ù–∞–π–¥–µ–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ –¥–ª–∏–Ω–Ω–æ—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ...');
            
            loadImageOptimized(
              'https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/long-haired.png',
              '–î–ª–∏–Ω–Ω–æ—à–µ—Ä—Å—Ç–Ω—ã–µ –ø–æ—Ä–æ–¥—ã',
              imageContainer,
              function() {
                console.log('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ long-haired.png —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ');
                imageContainer.removeAttribute('aria-hidden');
              },
              function() {
                console.log('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è long-haired.png');
                imageContainer.innerHTML = '<div style="color: white; text-align: center; padding: 20px;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</div>';
              }
            );
            
            console.log('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ long-haired.png —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–ª–∏–Ω–Ω–æ—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥');
          }
        }
      });
    };
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —á–µ—Ä–Ω–æ–≥–æ —Ñ–æ–Ω–∞ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª–∏–Ω–Ω–æ—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥
    window.setLonghairBlackBackground = function() {
      console.log('–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —á–µ—Ä–Ω—ã–π —Ñ–æ–Ω –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª–∏–Ω–Ω–æ—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥...');
      
      const catsCatsElement = document.getElementById('cats-cats');
      if (!catsCatsElement) {
        console.error('–≠–ª–µ–º–µ–Ω—Ç cats-cats –Ω–µ –Ω–∞–π–¥–µ–Ω');
        return;
      }
      
      const categoryCards = catsCatsElement.querySelectorAll('.card');
      categoryCards.forEach(card => {
        const title = card.querySelector('h3').textContent;
        if (title.includes('–î–ª–∏–Ω–Ω–æ—à–µ—Ä—Å—Ç–Ω—ã–µ')) {
          const imageContainer = card.querySelector('.ph');
          if (imageContainer) {
            imageContainer.classList.add('ph--black');
            // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–º–Ω—ã–π —Ñ–æ–Ω —á–µ—Ä–µ–∑ style
            imageContainer.style.backgroundColor = 'rgb(23, 26, 28)';
            console.log('–¢–µ–º–Ω—ã–π —Ñ–æ–Ω (rgb(23, 26, 28)) —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª–∏–Ω–Ω–æ—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥');
          }
        }
      });
    };
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª–∏–Ω–Ω–æ—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥
    window.forceSetLonghairImage = function() {
      console.log('–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –¥–ª–∏–Ω–Ω–æ—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥...');
      
      const catsCatsElement = document.getElementById('cats-cats');
      if (!catsCatsElement) {
        console.error('–≠–ª–µ–º–µ–Ω—Ç cats-cats –Ω–µ –Ω–∞–π–¥–µ–Ω');
        return;
      }
      
      const categoryCards = catsCatsElement.querySelectorAll('.card');
      categoryCards.forEach(card => {
        const title = card.querySelector('h3').textContent;
        if (title.includes('–î–ª–∏–Ω–Ω–æ—à–µ—Ä—Å—Ç–Ω—ã–µ')) {
          console.log('–ù–∞–π–¥–µ–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ –¥–ª–∏–Ω–Ω–æ—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥, –æ–±–Ω–æ–≤–ª—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ —Å—Ç–∏–ª–∏...');
          
          const imageContainer = card.querySelector('.ph');
          if (imageContainer) {
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å —Å —Ç–µ–º–Ω—ã–º —Ñ–æ–Ω–æ–º –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            imageContainer.classList.add('ph--black');
            // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–º–Ω—ã–π —Ñ–æ–Ω —á–µ—Ä–µ–∑ style
            imageContainer.style.backgroundColor = 'rgb(23, 26, 28)';
            // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            imageContainer.innerHTML = '';
            
            // –°–æ–∑–¥–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            const img = document.createElement('img');
            img.src = 'https://zrntpatdzumhybclhrhp.supabase.co/storage/v1/object/public/cats/long-haired.png';
            img.alt = '–î–ª–∏–Ω–Ω–æ—à–µ—Ä—Å—Ç–Ω—ã–µ –ø–æ—Ä–æ–¥—ã';
            img.style.cssText = `
              width: 100%;
              height: 100%;
              object-fit: contain;
              border-radius: 12px;
              background-color: rgb(23, 26, 28);
            `;
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            img.onerror = function() {
              console.log('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è long-haired.png');
              imageContainer.textContent = "–§–æ—Ç–æ";
              imageContainer.setAttribute('aria-hidden', 'true');
            };
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
            img.onload = function() {
              console.log('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ long-haired.png —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ');
              imageContainer.removeAttribute('aria-hidden');
            };
            
            imageContainer.appendChild(img);
            console.log('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ long-haired.png –∏ —á–µ—Ä–Ω—ã–π —Ñ–æ–Ω —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–ª–∏–Ω–Ω–æ—à–µ—Ä—Å—Ç–Ω—ã—Ö –ø–æ—Ä–æ–¥');
          }
        }
      });
    };
    
    // Start the application when DOM is loaded
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }
  </script>
  
  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ app.js –¥–ª—è Supabase –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ -->
  <script src="app.js"></script>
</body>
</html>